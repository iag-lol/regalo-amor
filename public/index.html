<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Atelier Blanc · Regalos Personalizados</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="main-header">
      <div class="brand">
        <span class="brand-mark"></span>
        Atelier Blanc
      </div>
      <nav>
        <a href="#coleccion">Colección</a>
        <a href="#experiencia">Experiencia</a>
        <a href="#atelierLab">Atelier Lab</a>
        <a href="#faq">FAQ</a>
      </nav>
      <div class="header-actions">
        <button class="ghost-btn" id="adminBtn">Panel</button>
        <button class="primary-btn" id="openCheckout" disabled>Personalizar</button>
      </div>
    </header>

    <section class="hero">
      <div class="hero-copy">
        <p class="eyebrow">Hecho en Santiago · Envíos el mismo día</p>
        <h1>Colecciones verticales que elevan cada celebración.</h1>
        <p>Curamos objetos de autor, trabajamos ilustraciones exclusivas y coordinamos tu entrega con precisión de estudio creativo. Diseña tu regalo con la misma elegancia con la que Apple lanza un producto.</p>
        <div class="hero-cta">
          <a class="primary-btn" href="#coleccion">Explorar colección</a>
          <button class="text-btn" id="scrollDestacados">Ver destacados</button>
        </div>
      </div>
      <div class="hero-gallery">
        <figure>
          <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=600&q=60" alt="Caja personalizada" />
          <figcaption>Sets verticales con flores preservadas.</figcaption>
        </figure>
        <figure>
          <img src="https://images.unsplash.com/photo-1518548419970-58e3b4079ab2?auto=format&fit=crop&w=600&q=60" alt="Champagne personalizado" />
          <figcaption>Grabados, foil y envoltorios a medida.</figcaption>
        </figure>
      </div>
    </section>

    <section class="capsule-grid" id="destacados">
      <article>
        <h3>Curaduría de autor</h3>
        <p>Trabajamos con perfumistas, chocolaterías bean-to-bar y estudios de papel artesanal.</p>
      </article>
      <article>
        <h3>Diseño editorial</h3>
        <p>Tipografías exclusivas, monogramas y control de color aprobado por directores de arte.</p>
      </article>
      <article>
        <h3>Logística boutique</h3>
        <p>Seguimiento humano y confirmaciones por WhatsApp antes de despachar.</p>
      </article>
    </section>

    <section class="product-section" id="coleccion">
      <div class="section-head">
        <div>
          <p class="eyebrow">Colección permanente</p>
          <h2>Selecciona hasta cinco piezas por experiencia</h2>
        </div>
        <div class="filters">
          <input type="search" id="searchProducto" placeholder="Buscar producto" />
          <select id="categoriaFiltro">
            <option value="">Todas las categorías</option>
          </select>
        </div>
      </div>
      <p class="section-subtitle">Imágenes verticales pensadas para destacar packaging, textura y escala. Al agregar productos podrás abrir el estudio de personalización para completar tu entrega.</p>
      <div class="product-grid" id="listaProductos"></div>
      <div class="cta-row">
        <p>¿Listo para personalizar? Usa el botón “Personalizar” del header para abrir la ventana Atelier Lab.</p>
      </div>
    </section>

    <section class="experience" id="experiencia">
      <div>
        <p class="eyebrow">Programa de fidelidad</p>
        <h3>Acumula puntos Atelier para upgrades de empaque, impresión en foil o envíos express.</h3>
        <p>Guardamos tu historial por RUT y sumamos puntos cada vez que confirmas un pedido. Puedes canjearlos por papel algodón, tarjetas caligrafiadas o ilustraciones exclusivas.</p>
        <p class="points" id="puntosCliente">Tus puntos aparecerán aquí luego de pagar.</p>
      </div>
      <div class="experience-card">
        <h4>Workflow</h4>
        <ol>
          <li>Curar: selecciona tus piezas favoritas (máximo 5 por envío).</li>
          <li>Personalizar: mensaje, ilustración y referencia visual.</li>
          <li>Confirmar: Flow envía la boleta y coordinamos la entrega.</li>
        </ol>
        <p>Todo el proceso se acompaña por WhatsApp con avances de diseño.</p>
      </div>
    </section>

    <section class="atelier-lab" id="atelierLab">
      <header>
        <p class="eyebrow">Atelier Lab</p>
        <h2>Personalización inmersiva</h2>
        <p>Una vez cierres tu carrito, se abre una ventana inspirada en los paneles de macOS para completar cada detalle.</p>
      </header>
      <div class="lab-grid">
        <article>
          <h4>Mensaje</h4>
          <p>Limitamos a 240 caracteres para mantener la composición perfecta.</p>
        </article>
        <article>
          <h4>Ilustración o foto</h4>
          <p>Sube uno o varios referentes en vertical; se almacenan seguros en Supabase.</p>
        </article>
        <article>
          <h4>Agenda</h4>
          <p>Solo mostramos los días y horarios que cargas en Configuración de envíos.</p>
        </article>
      </div>
    </section>

    <section class="faq" id="faq">
      <h3>Preguntas frecuentes</h3>
      <div class="faq-grid">
        <article>
          <h5>¿Cuánto tarda el diseño?</h5>
          <p>Enviamos boceto digital en 2 horas hábiles vía WhatsApp.</p>
        </article>
        <article>
          <h5>¿Puedo repetir pedidos?</h5>
          <p>Duplicamos tu carrito desde el panel admin y reusamos ilustraciones.</p>
        </article>
        <article>
          <h5>¿Cómo monitorean el stock?</h5>
          <p>El panel muestra alertas en rojo cuando un producto baja de 5 unidades.</p>
        </article>
      </div>
    </section>

    <div class="floating-cart" id="floatingCart">
      <div>
        <span id="cartCount">0 productos</span>
        <small>Curaduría en progreso</small>
      </div>
      <strong id="cartTotal">$0</strong>
    </div>

    <div class="overlay" id="checkoutOverlay">
      <div class="overlay-panel">
        <button class="close" id="closeOverlay">×</button>
        <div class="checkout-stack">
          <section class="pane review">
            <header>
              <p class="eyebrow">Selección</p>
              <h3>Resumen del pedido</h3>
            </header>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-total">
              <span>Subtotal</span>
              <strong id="checkoutTotal">$0</strong>
            </div>
            <button class="ghost-btn full" id="clearCart">Vaciar carrito</button>
          </section>
          <section class="pane form">
            <header>
              <p class="eyebrow">Personalización</p>
              <h3>Completa los datos</h3>
            </header>
            <form id="pedidoForm">
              <div class="form-grid">
                <label>Nombre completo<input type="text" name="nombre" required /></label>
                <label>RUT<input type="text" name="rut" required /></label>
                <label>Correo electrónico<input type="email" name="email" required /></label>
                <label>Dirección<input type="text" name="direccion" required /></label>
                <label>Comuna<input type="text" name="comuna" required list="comunasList" /></label>
                <label>Teléfono WhatsApp<input type="tel" name="telefonoWsp" required /></label>
                <label>Teléfono de llamada<input type="tel" name="telefonoLlamada" required /></label>
                <label class="checkbox">
                  <input type="checkbox" name="telefonoEsMismo" /> ¿Es el mismo número?
                </label>
                <label>Día de envío<select name="fechaEnvio" id="diasEnvio" required></select></label>
                <label>Horario<select name="horarioEnvio" id="horariosEnvio" required></select></label>
              </div>
              <datalist id="comunasList"></datalist>
              <div class="lab-fields">
                <label>Mensaje especial<textarea id="mensajePersonalizacion" maxlength="240" placeholder="Dedicatoria elegante"></textarea></label>
                <label>Tipo de diseño
                  <select id="tipoDiseno">
                    <option value="solo_texto">Solo texto</option>
                    <option value="texto_y_imagen">Texto + imagen</option>
                    <option value="ilustracion_personalizada">Ilustración personalizada</option>
                  </select>
                </label>
                <label>Sube inspiración (vertical)<input type="file" id="imagenPersonalizacion" accept="image/*" /></label>
                <div class="image-preview" id="previewImagen"></div>
              </div>
              <button type="button" class="primary-btn full" id="btnConfirmar">Confirmar y pagar</button>
              <p class="nota">Serás redirigido a Flow para completar el pago.</p>
            </form>
          </section>
        </div>
      </div>
    </div>

    <div class="modal" id="adminModal">
      <div class="modal-content">
        <button class="close" id="closeAdmin">×</button>
        <div id="adminLogin">
          <h3>Panel administrativo</h3>
          <p>Controla stock, pedidos diarios y métricas tributarias.</p>
          <label>Contraseña<input type="password" id="adminPassword" /></label>
          <button class="primary-btn full" id="adminLoginBtn">Ingresar</button>
          <p class="error" id="adminError"></p>
        </div>
        <div id="adminPanel" class="admin-panel hidden">
          <header class="admin-head">
            <div>
              <p class="eyebrow">Dashboard</p>
              <h3>Centro de operaciones</h3>
            </div>
            <button class="ghost-btn" id="refreshAdmin">Actualizar</button>
          </header>
          <div class="admin-grid">
            <section>
              <h4>Pedidos de hoy</h4>
              <ul id="pedidosHoy"></ul>
            </section>
            <section>
              <h4>Stock y alertas</h4>
              <table>
                <thead>
                  <tr><th>Producto</th><th>Stock</th></tr>
                </thead>
                <tbody id="stockTabla"></tbody>
              </table>
            </section>
            <section>
              <h4>Métricas últimos 7 días</h4>
              <div id="metricas"></div>
            </section>
            <section>
              <h4>Configurar envíos</h4>
              <form id="configEnviosForm">
                <label>Días abiertos<textarea name="dias"></textarea></label>
                <label>Horarios<textarea name="horarios"></textarea></label>
                <label>Costo base<input type="number" name="costo" min="0" /></label>
                <label>Comunas<textarea name="comunas"></textarea></label>
                <button class="primary-btn" type="submit">Guardar</button>
                <p class="status" id="configStatus"></p>
              </form>
            </section>
            <section>
              <h4>Pedidos recientes</h4>
              <div id="pedidosRecientes"></div>
            </section>
            <section>
              <h4>Módulo SII</h4>
              <div id="siiInfo"></div>
              <div class="admin-actions">
                <button class="ghost-btn" id="marcarSii">Marcar pagado</button>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>

    <script src="./main.js" type="module"></script>
  </body>
</html>
