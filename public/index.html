<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Regalo Amor · Regalos Personalizados Únicos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="main-header">
      <div class="brand">
        <span class="brand-mark"></span>
        Regalo Amor
      </div>
      <nav>
        <a href="#coleccion">Productos</a>
        <a href="#experiencia">Nosotros</a>
        <a href="#personaliza">Personaliza</a>
        <a href="#faq">Preguntas</a>
      </nav>
      <div class="header-actions">
        <button class="ghost-btn" id="adminBtn">Panel</button>
        <button class="primary-btn" id="openCheckout" disabled>Personalizar</button>
      </div>
    </header>

    <section class="hero">
      <div class="hero-copy">
        <p class="eyebrow">Regalos personalizados · Envíos a todo Chile</p>
        <h1>Regalos personalizados para cada ocasión</h1>
        <p>Personalizamos tazas, botellas, poleras, gorros, pantuflas, cuadros y más. Diseña tu regalo con fotos y textos únicos. Entrega rápida y calidad garantizada.</p>
        <div class="hero-cta">
          <a class="primary-btn" href="#coleccion">Ver productos</a>
          <button class="text-btn" id="scrollDestacados">Descubre más</button>
        </div>
      </div>
      <div class="hero-gallery">
        <figure>
          <img src="https://images.unsplash.com/photo-1513885535751-8b9238bd345a?auto=format&fit=crop&w=600&q=80" alt="Tazas personalizadas" />
          <figcaption>Tazas personalizadas con tus fotos y diseños</figcaption>
        </figure>
        <figure>
          <img src="https://images.unsplash.com/photo-1523381294911-8d3cead13475?auto=format&fit=crop&w=600&q=80" alt="Poleras personalizadas" />
          <figcaption>Poleras, gorros y ropa con impresión de calidad</figcaption>
        </figure>
      </div>
    </section>

    <section class="capsule-grid" id="destacados">
      <article>
        <h3>100% Personalizable</h3>
        <p>Sube tus fotos y agrega textos. Diseñamos cada producto según lo que necesites.</p>
      </article>
      <article>
        <h3>Buena calidad</h3>
        <p>Impresiones duraderas en productos de calidad. Si no te gusta, lo cambiamos.</p>
      </article>
      <article>
        <h3>Envío rápido</h3>
        <p>Listo en 2-3 días. Te avisamos por WhatsApp cuando enviamos tu pedido.</p>
      </article>
    </section>

    <section class="product-section" id="coleccion">
      <div class="section-head">
        <div>
          <p class="eyebrow">Nuestros productos</p>
          <h2>Elige y personaliza tus regalos favoritos</h2>
        </div>
        <div class="filters">
          <input type="search" id="searchProducto" placeholder="Buscar producto" />
          <select id="categoriaFiltro">
            <option value="">Todas las categorías</option>
          </select>
        </div>
      </div>
      <p class="section-subtitle">Todos nuestros productos se personalizan con tus fotos y textos. Elige lo que más te guste y hazlo tuyo.</p>
      <div class="product-grid" id="listaProductos"></div>
      <div class="cta-row">
        <p>Agrega productos al carrito y luego haz clic en "Personalizar" para completar tu pedido con diseños únicos.</p>
      </div>
    </section>

    <section class="experience" id="experiencia">
      <div>
        <p class="eyebrow">Clientes frecuentes</p>
        <h3>Gana puntos y obtén descuentos en tus próximas compras</h3>
        <p>Por cada compra acumulas puntos que puedes usar para descuentos, envío gratis o productos de regalo.</p>
        <p class="points" id="puntosCliente">Tus puntos aparecerán después de tu primera compra.</p>
      </div>
      <div class="experience-card">
        <h4>¿Cómo comprar?</h4>
        <ol>
          <li>Elige los productos que quieras</li>
          <li>Sube tus fotos y escribe tu texto</li>
          <li>Paga seguro con tarjeta o transferencia</li>
          <li>Recibe tu pedido en 2-3 días</li>
        </ol>
        <p>Te avisamos por WhatsApp cuando esté listo.</p>
      </div>
    </section>

    <section class="atelier-lab" id="personaliza">
      <header>
        <p class="eyebrow">Personalización</p>
        <h2>Diseña tu regalo como quieras</h2>
        <p>Cuando agregues productos al carrito, podrás subir fotos, escribir textos y elegir tu fecha de entrega.</p>
      </header>
      <div class="lab-grid">
        <article>
          <h4>Agrega texto</h4>
          <p>Escribe nombres, frases o lo que quieras (máximo 240 caracteres).</p>
        </article>
        <article>
          <h4>Sube fotos</h4>
          <p>Sube tus propias imágenes desde tu celular o computador.</p>
        </article>
        <article>
          <h4>Elige cuándo recibir</h4>
          <p>Selecciona el día y hora para recibir tu pedido.</p>
        </article>
      </div>
    </section>

    <section class="faq" id="faq">
      <h3>Preguntas frecuentes</h3>
      <div class="faq-grid">
        <article>
          <h5>¿Cuánto demora?</h5>
          <p>2-3 días hábiles desde que pagas. Te avisamos por WhatsApp cuando enviamos.</p>
        </article>
        <article>
          <h5>¿Envían a todo Chile?</h5>
          <p>Sí, enviamos a todo el país. El envío tiene costo adicional según la zona.</p>
        </article>
        <article>
          <h5>¿Cómo puedo pagar?</h5>
          <p>Con tarjeta de crédito, débito o transferencia. Todo es seguro con Flow.</p>
        </article>
      </div>
    </section>

    <div class="floating-cart" id="floatingCart">
      <div>
        <span id="cartCount">0 productos</span>
        <small>Curaduría en progreso</small>
      </div>
      <strong id="cartTotal">$0</strong>
    </div>

    <div class="overlay" id="checkoutOverlay">
      <div class="overlay-panel">
        <button class="close" id="closeOverlay">×</button>
        <div class="checkout-stack">
          <section class="pane review">
            <header>
              <p class="eyebrow">Selección</p>
              <h3>Resumen del pedido</h3>
            </header>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-total">
              <span>Subtotal</span>
              <strong id="checkoutTotal">$0</strong>
            </div>
            <button class="ghost-btn full" id="clearCart">Vaciar carrito</button>
          </section>
          <section class="pane form">
            <header>
              <p class="eyebrow">Personalización</p>
              <h3>Completa los datos</h3>
            </header>
            <form id="pedidoForm">
              <div class="form-grid">
                <label>Nombre completo<input type="text" name="nombre" required /></label>
                <label>RUT<input type="text" name="rut" required /></label>
                <label>Correo electrónico<input type="email" name="email" required /></label>
                <label>Dirección<input type="text" name="direccion" required /></label>
                <label>Comuna<input type="text" name="comuna" required list="comunasList" /></label>
                <label>Teléfono WhatsApp<input type="tel" name="telefonoWsp" required /></label>
                <label>Teléfono de llamada<input type="tel" name="telefonoLlamada" required /></label>
                <label class="checkbox">
                  <input type="checkbox" name="telefonoEsMismo" /> ¿Es el mismo número?
                </label>
                <label>Día de envío<select name="fechaEnvio" id="diasEnvio" required></select></label>
                <label>Horario<select name="horarioEnvio" id="horariosEnvio" required></select></label>
              </div>
              <datalist id="comunasList"></datalist>
              <div class="lab-fields">
                <label>Mensaje especial<textarea id="mensajePersonalizacion" maxlength="240" placeholder="Dedicatoria elegante"></textarea></label>
                <label>Tipo de diseño
                  <select id="tipoDiseno">
                    <option value="solo_texto">Solo texto</option>
                    <option value="texto_y_imagen">Texto + imagen</option>
                    <option value="ilustracion_personalizada">Ilustración personalizada</option>
                  </select>
                </label>
                <label>Sube inspiración (vertical)<input type="file" id="imagenPersonalizacion" accept="image/*" /></label>
                <div class="image-preview" id="previewImagen"></div>
              </div>
              <button type="button" class="primary-btn full" id="btnConfirmar">Confirmar y pagar</button>
              <p class="nota">Serás redirigido a Flow para completar el pago.</p>
            </form>
          </section>
        </div>
      </div>
    </div>

    <div class="modal" id="adminModal">
      <div class="modal-content">
        <button class="close" id="closeAdmin">×</button>
        <div id="adminLogin">
          <h3>Panel de Administración</h3>
          <p>Gestiona productos, pedidos y configuración de la tienda.</p>
          <label>Contraseña de administrador<input type="password" id="adminPassword" placeholder="Ingresa tu contraseña" /></label>
          <button class="primary-btn full" id="adminLoginBtn">Entrar al panel</button>
          <p class="error" id="adminError"></p>
        </div>
        <div id="adminPanel" class="admin-panel hidden">
          <header class="admin-head">
            <div>
              <p class="eyebrow">Dashboard</p>
              <h3>Centro de operaciones Regalo Amor</h3>
            </div>
            <div class="admin-tabs">
              <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
              <button class="tab-btn" data-tab="productos">Productos</button>
              <button class="tab-btn" data-tab="pedidos">Pedidos</button>
              <button class="tab-btn" data-tab="configuracion">Configuración</button>
            </div>
            <button class="ghost-btn" id="refreshAdmin">Actualizar</button>
          </header>

          <div class="tab-content active" id="tab-dashboard">
          <div class="admin-grid">
            <section>
              <h4>Pedidos de hoy</h4>
              <ul id="pedidosHoy"></ul>
            </section>
            <section>
              <h4>Stock y alertas</h4>
              <table>
                <thead>
                  <tr><th>Producto</th><th>Stock</th></tr>
                </thead>
                <tbody id="stockTabla"></tbody>
              </table>
            </section>
            <section>
              <h4>Métricas últimos 7 días</h4>
              <div id="metricas"></div>
            </section>
            <section>
              <h4>Módulo SII</h4>
              <div id="siiInfo"></div>
              <div class="admin-actions">
                <button class="ghost-btn" id="marcarSii">Marcar pagado</button>
              </div>
            </section>
          </div>
          </div>

          <div class="tab-content" id="tab-productos">
            <div class="productos-header">
              <h4>Gestión de productos</h4>
              <button class="primary-btn" id="btnNuevoProducto">+ Nuevo producto</button>
            </div>
            <div class="productos-filtros">
              <input type="search" id="adminSearchProducto" placeholder="Buscar producto..." />
              <select id="adminCategoriaFiltro">
                <option value="">Todas las categorías</option>
              </select>
            </div>
            <div class="productos-tabla-container">
              <table class="productos-tabla" id="productosTabla">
                <thead>
                  <tr>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Categoría</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th>Descuento</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="productosTableBody"></tbody>
              </table>
            </div>
          </div>

          <div class="tab-content" id="tab-pedidos">
            <h4>Pedidos recientes</h4>
            <div id="pedidosRecientes"></div>
          </div>

          <div class="tab-content" id="tab-configuracion">
            <div class="config-grid">
              <section>
                <h4>Configurar envíos</h4>
                <form id="configEnviosForm">
                  <label>Días abiertos<textarea name="dias" placeholder="Lunes, Martes, Miércoles..."></textarea></label>
                  <label>Horarios<textarea name="horarios" placeholder="10:00-13:00, 15:00-19:00"></textarea></label>
                  <label>Costo base<input type="number" name="costo" min="0" /></label>
                  <label>Comunas<textarea name="comunas" placeholder="Santiago, Providencia, Las Condes..."></textarea></label>
                  <button class="primary-btn" type="submit">Guardar configuración</button>
                  <p class="status" id="configStatus"></p>
                </form>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="productoModal">
      <div class="modal-content">
        <button class="close" id="closeProductoModal">×</button>
        <h3 id="productoModalTitle">Nuevo producto</h3>
        <form id="productoForm">
          <input type="hidden" id="productoId" />
          <div class="form-grid">
            <label>Nombre del producto *<input type="text" id="productoNombre" required /></label>
            <label>Categoría *<input type="text" id="productoCategoria" required list="categoriasDatalist" /></label>
            <label>Precio *<input type="number" id="productoPrecio" required min="0" step="100" /></label>
            <label>Stock<input type="number" id="productoStock" min="0" value="0" /></label>
            <label>Descuento (%)<input type="number" id="productoDescuento" min="0" max="100" step="1" value="0" /></label>
            <label class="checkbox">
              <input type="checkbox" id="productoEsCombo" /> Es un combo/pack
            </label>
          </div>
          <datalist id="categoriasDatalist"></datalist>
          <label>Descripción<textarea id="productoDescripcion" rows="3" placeholder="Descripción del producto..."></textarea></label>
          <div class="imagen-upload">
            <label>Imagen principal
              <input type="file" id="productoImagen" accept="image/*" />
            </label>
            <div class="image-preview" id="productoImagenPreview"></div>
          </div>
          <div class="form-actions">
            <button type="button" class="ghost-btn" id="cancelProducto">Cancelar</button>
            <button type="submit" class="primary-btn" id="guardarProducto">Guardar producto</button>
          </div>
          <p class="error" id="productoError"></p>
        </form>
      </div>
    </div>

    <script src="./main.js" type="module"></script>
  </body>
</html>
